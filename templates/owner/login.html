{% extends "base.html" %}
{% block content %}

<div class="flex items-center justify-center px-4 py-16">

<div class="w-full max-w-md bg-white border border-gray-200 rounded-2xl shadow-lg p-10 space-y-8">


    <!-- Title -->
    <div>
      <h2 class="text-2xl font-semibold tracking-tight">
Owner Login</h2>

      {% if register %}
        <p class="text-gray-500">
          Create your owner account
        </p>
      {% elif mode == "otp" %}
        <p class="text-gray-500">
          Login with OTP (use 1234 for demo)
        </p>
      {% else %}
        <p class="text-gray-500">
          Login with phone number and PIN
        </p>
      {% endif %}
    </div>

    {% if error %}
      <p class="text-red-600 text-sm">{{ error }}</p>
    {% endif %}

    <!-- Registration Mode -->
    {% if register %}
    <form method="POST" action="/owner/register" class="space-y-4">

      <input type="hidden" name="phone" value="{{ phone }}">

      <input name="name"
             placeholder="Your Name"
             class="w-full border border-gray-300 rounded-lg px-4 py-3 bg-white 
focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 transition"

             required>

      <input name="pin"
             placeholder="Set 4-digit PIN"
             type="password"
             maxlength="4"
             class="w-full border border-gray-300 rounded-lg px-4 py-3 bg-white 
focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 transition"

             required>

      <button class="w-full bg-gradient-to-r from-purple-500 to-indigo-500 text-white py-3 rounded-md font-medium hover:opacity-90 transition">
        Register & Login
      </button>

    </form>

    {% else %}

    <!-- Login Form -->
    <form method="POST" class="space-y-4">

      <input type="hidden" name="mode" value="{{ mode }}">

      <input name="phone"
             placeholder="Phone Number"
             maxlength="10"
             class="w-full border border-gray-300 rounded-md px-4 py-2 bg-white focus:outline-none focus:ring-2 focus:ring-indigo-500"
             required>

      {% if mode == "pin" %}
      <input name="pin"
             placeholder="4-digit PIN"
             type="password"
             maxlength="4"
             class="w-full border border-gray-300 rounded-md px-4 py-2 bg-white focus:outline-none focus:ring-2 focus:ring-indigo-500"
             required>
      {% else %}
      <input name="otp"
             placeholder="Enter OTP (1234)"
             maxlength="4"
             class="w-full border border-gray-300 rounded-md px-4 py-2 bg-white focus:outline-none focus:ring-2 focus:ring-indigo-500"
             required>
      {% endif %}

      <button class="w-full bg-gradient-to-r from-purple-500 to-indigo-500 text-white py-3 rounded-md font-medium hover:opacity-90 transition">
        {% if mode == "pin" %}
          Login with PIN
        {% else %}
          Verify OTP
        {% endif %}
      </button>

    </form>

    <!-- Toggle -->
    <div class="text-center pt-2">
      {% if mode == "pin" %}
        <a href="/owner/login?mode=otp"
           class="text-indigo-600 font-medium hover:underline">
          Use OTP instead / New Owner
        </a>
      {% else %}
        <a href="/owner/login"
           class="text-indigo-600 font-medium hover:underline">
          Login with PIN instead
        </a>
      {% endif %}
    </div>

    {% endif %}

  </div>

</div>

{% endblock %}
